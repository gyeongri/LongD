<template>
  <GoogleMap
    :api-key="googleApiKey"
    style="width: 100%; height: 500px"
    :center="center"
    :zoom="8"
    language="kor"
  >
    <MarkerCluster>
      <Marker
        v-for="(location, i) in locations"
        :options="{ position: location }"
        :key="i"
      >
        <InfoWindow>
          <!-- <input type="text" v-model="where" />
          <h1>{{ where }}</h1> -->
          <h1>ðŸ’–ë†€ëŸ¬ê°ˆ ê³³ðŸ’–</h1>
          <!-- <div id="contet">
          <div id="siteNotice"></div>
          <h1 id="firstHeading" class="firstHeading">ðŸ’–ë‚´ ì‚¬ëž‘ðŸ’–</h1>
          <div id="bodyContent">
            <p>ë³´ê³ ì‹¶ì–´</p>
          </div>
        </div> -->
        </InfoWindow>
      </Marker>
    </MarkerCluster>
  </GoogleMap>
</template>

<script>
import { defineComponent, ref } from 'vue';
import { GoogleMap, Marker, MarkerCluster, InfoWindow } from 'vue3-google-map';

export default defineComponent({
  components: { GoogleMap, Marker, MarkerCluster, InfoWindow },
  setup() {
    const where = ref('');
    const googleApiKey = ref(import.meta.env.VITE_GOOGLE_REST_API_KEY);
    const center = { lat: 36.8971999, lng: 127.5349361 };
    const locations = [
      { lat: 36.10684456115392, lng: 128.41835497890136 },
      { lat: 37.555899571774724, lng: 127.00524613483742 },
    ];

    return { where, googleApiKey, center, locations };
  },
});
</script>

<!-- <template>
  <div id="map"></div>
</template>

<script setup>
import { ref, onMounted } from 'vue';

const initMap = () => {
  const map = new google.maps.Map(document.getElementById("map"), {
    center: { lat: 37.5400456, lng: 126.9921017 },
    zoom: 10
  });

  const malls = [
    { label: "C", name: "ì½”ì—‘ìŠ¤ëª°", lat: 37.5115557, lng: 127.0595261 },
    { label: "G", name: "ê³ íˆ¬ëª°", lat: 37.5062379, lng: 127.0050378 },
    { label: "D", name: "ë™ëŒ€ë¬¸ì‹œìž¥", lat: 37.566596, lng: 127.007702 },
    { label: "I", name: "IFCëª°", lat: 37.5251644, lng: 126.9255491 },
    { label: "L", name: "ë¡¯ë°ì›”ë“œíƒ€ì›Œëª°", lat: 37.5125585, lng: 127.1025353 },
    { label: "M", name: "ëª…ë™ì§€í•˜ìƒê°€", lat: 37.563692, lng: 126.9822107 },
    { label: "T", name: "íƒ€ìž„ìŠ¤í€˜ì–´", lat: 37.5173108, lng: 126.9033793 }
  ];

  const bounds = new google.maps.LatLngBounds();
  const infoWindow = new google.maps.InfoWindow();

  malls.forEach(({ label, name, lat, lng }) => {
    const marker = new google.maps.Marker({
      position: { lat, lng },
      label,
      map
    });
    bounds.extend(marker.position);

    marker.addListener("click", () => {
      map.panTo(marker.position);
      infoWindow.setContent(name);
      infoWindow.open({
        anchor: marker,
        map
      });
    });
  });

  map.fitBounds(bounds);
};

onMounted(() => {
  // Ensure the Google Maps API is loaded before initializing the map
  if (typeof google !== 'undefined' && google.maps) {
    initMap();
  } else {
    // You might want to add some error handling if the API is not loaded
    console.error("Google Maps API not loaded.");
  }
});
</script>

<style>
#map {
  height: 500px;
}
</style> -->
